**Script *shooting_data_collection***

The script downloads basketball shooting data from the FIBA LiveStats platform, transforming it into the EPSG:3857 reference system.

The shot data is matched to a digital representation of half of the court (files *court_lines.shp*, *outer_lines.shp*, *neutral_zone.shp*), and the shot information it contains includes: 

- team (column *team*), 

- team code (*team_code*), 

- opponent code (*opponent*), 

- player taking the shot (*player*), 

- jersey number of the player taking the shot (*shirtNum*), 

- quarter of the game (*quarter*),

- period of the game (*period*), 

- type of action (*action*), 

- result of the shot (*made*), 

- X coordinate (*x*), 

- Y coordinate (*y*), 

- action number (*actionNum*). 

The data is saved in a CSV file. The program then creates separate CSV and SHP files for each player included in the main file with shooting data. 

The output file *shooting_data.csv* is used to estimate shooting data (if you have decided to download data for the entire league season), which is performed by script
No. 2 (*empirical_bayes.py*).

The SHP files for individual players are the basis for subsequent calculations of shooting efficiency metrics, calculated in script No. 3 (*local_metrics.py*).

**Input parameters for the program**

The program requires the following parameters to be entered in the following order:

- league code (e.g., *POL*; can be found at: *https://about.fiba.basketball/en/regions/europe/national-federations*),

- clue (e.g., *2nd League*),

- ID of the first match (e.g., *2310000*),

- ID of the last match (e.g., *2450000*),

- output folder (e.g., *“C:/Users/Desktop/output”*),

- name of the output file (e.g., *shooting_data.csv*).

It is recommended to enter the clue parameter which will allow you to download shooting data for the entire league (e.g., *2nd League*) in order to estimate the shooting efficiency of the entire league in the next steps, which will enable you to measure the shooting efficiency of players in relation to league average. If you want to download data for a single team, enter the full name or part of the team name in the clue parameter (e.g., *Exact Systems* for the *Exact Systems Śląsk Wrocław* team).

**Example script call** 

*POL, 2nd League, 2310000, 2450000, “C:/Users/Desktop/output”, shooting_data.csv*

**Program output**

The program will save the output data in the folder defined when entering the parameters to the script *C:/Users/Desktop/output*. A result file with complete shooting data *shooting_data.csv* will appear in this folder. Additionally, data for each player will be saved in separate files in CSV and SHP formats. The destination folder for this data is the players subdirectory of the defined output folder *C:/Users/Desktop/output/players*.

**Visualization of output data**

Data in CSV or SHP formats can be opened in GIS software and then visualized depending on the result of the shot outcome. To do this, you need to:

- load the output file generated by the script into GIS software (*Layer* -> *Add Laye*r -> *Add Delimited Text Layer/Add Vector Layer*)

- Right-click on the layer name in the list of open layers, then go to *Properties* -> *Style* -> *Unique Values*.

- In the *Value* field, select the *made* column and click *Classify*. A value of *0* means a missed shot, a value of *1* means a successful shot. This gives you a visualization of the data depending on the result of the attempt.

- Missed and successful attempts can be styled by clicking on the *symbol*, then on the *regular marker*, and selecting the appropriate label. Usually, missed shots are represented by a red *cross2* symbol, and successful attempts remain a green *circle*.


**The code snippet responsible for collecting user input and searching for game URLs is sourced from the benhur07b's repository available on GitHub (https://github.com/benhur07b/ms-thesis-spatial-analysis-shooting-philippine-basketball).**
